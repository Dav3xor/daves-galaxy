<?xml version="1.0" standalone="no"?>
<!DOCTYPE html PUBLIC
    "-//W3C//DTD XHTML 1.1 plus MathML 2.0 plus SVG 1.1//EN"
    "http://www.w3.org/2002/04/xhtml-math-svg/xhtml-math-svg.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      version="XHTML 1.2" xml:lang="en"
      xmlns:svg="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink">
  <head>
    <script language="JavaScript" src="/site_media/jquery.js"></script>
    <script type="text/javascript" src="jquery.svgdom.js"></script>
    <script language="JavaScript" src="/site_media/newdominion.js"></script>
    <link rel="stylesheet" type="text/css" href="/site_media/newdominion.css" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  </head>
  <body onresize="setaspectratio()">
    <object
      height="86px"
      data="/site_media/newdominionlogo.svg" 
      style="position:absolute; margin-top: 5px; margin-left: 5px;"
      type="image/svg+xml">
      logo
    </object>
    <object
      data="/site_media/controls.svg"
      type="image/svg+xml"
      style="position:absolute; margin-top: 100px; margin-left:5px;">
      navigation
    </object>
    <div style="position: absolute; right: 5px; top: 5px;">
      <div class='menu' style="float: left;">
        <ul>
          <li>Log</li>
          <li>Newspaper</li>
          <li onmouseup="newmenu('/politics/neighbors/','GET');">Neighbors</li>
          <li onmouseup="newmenu('/messages/get/','GET');">Messages ({{nummessages}})</li>
        </ul>
      </div>
      <div class='menu' style="float: right; margin-left: 10px;">
        <table> 
          <tr><td>Wiki</td>        <td onmouseup="handlemenuitemreq('/login/')">Login</td>  </tr>
          <tr><td>Scoreboard</td>  <td>About</td>  </tr>
          <tr><td>New Account</td> <td>Help</td>   </tr>
        </table>
      </div>
         
    </div>
    <div id="mapdiv">
        <svg xmlns="http://www.w3.org/2000/svg"   
          version="1.1"
          id="map"
          viewBox="{{ viewable.0 }} {{ viewable.1 }} {{ viewable.2 }} {{ viewable.3 }}" 
          ddpreserveAspectRatio="xMidYMid slice"
          onmousedown="domousedown(evt)"
          onmouseup="domouseup(evt)"
          onmousemove="domousemove(evt)"
          ondragstart="alert('drag')"
          onload="init(evt)">
          <defs>
            <marker id="endArrow" viewBox="0 0 10 10" 
                    refX="1" refY="5" markerUnits="strokeWidth" 
                    orient="auto" markerWidth="5" markerHeight="4">
              <polyline points="0,0 10,5 0,10 1,5" fill="#440000" />
            </marker>

          </defs>

          <rect x="{{viewable.0}}" y="{{viewable.1}}" 
                width="{{viewable.2}}" height="{{viewable.3}}" 
                fill="black" />
          <line visibility="hidden" id="rubberband" stroke-width=".03" 
                stroke="#440000" x1="1148.6" y1="976.0" x2="1145.0" y2="970"
                marker-end="url(#endArrow)"/>
          {% if fleets %}
            {% for fleet in fleets %}
            {{ fleet.svg|safe }}
            {% endfor %}
          {% endif %}
          {% if planets %}
            {% for planet in planets %}
            {{ planet.svg|safe }}
            {% endfor %}  
          {% endif %}
        </svg>
    </div>
  </body>
</html>
