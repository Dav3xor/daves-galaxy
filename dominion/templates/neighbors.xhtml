{% extends "popup.xhtml" %}
{% block content %}

{% if neighbors %}
    <h1>Neighbors</h1>
      <form name="setrelation{{ neighbor.id}}" 
            onsubmit="sendform(this,'/politics/submit/');"
            method="post" >
        <table>
          {% if neighbors.normal %}
          <tr><td>Country:</td><td>friend</td><td>neutral</td><td>enemy</td></tr>
          <tr><td colspan="4"><hr width="100%" /></td></tr>
          {% for neighbor in neighbors.normal %}
          <tr>
              <td style="color: white;">{{ neighbor.username }}</td>
              <td><input type="radio"
                         onclick="$('#neighborsubmit').show();stopprop(event);"
                         name="changestatus-{{neighbor.id}}"
                         value="friend"
                         {% ifequal neighbor.relation "friend" %}
                         checked="checked"{% endifequal %}>friend</input></td>
              <td><input type="radio" 
                         onclick="$('#neighborsubmit').show();stopprop(event);"
                         name="changestatus-{{neighbor.id}}"
                         value="neutral"
                         {% ifequal neighbor.relation "neutral" %}
                         checked="checked"{% endifequal %}>neutral</input></td>
              <td><input type="radio" 
                         onclick="$('#neighborsubmit').show();stopprop(event);"
                         name="changestatus-{{neighbor.id}}"
                         value="enemy"
                         {% ifequal neighbor.relation "enemy" %}
                         checked="checked"{% endifequal %}>enemy</input></td>
              <td><img src="/site_media/center.png" 
                       class="noborder"
                       onclick="centermap({{neighbor.get_profile.capital.x}},{{neighbor.get_profile.capital.y}});"
                       title="center on capital"/></td>
          </tr>
        {% endfor %}
        {% endif %}
        
        {% if neighbors.enemies %}
          <tr><td colspan="4"><hr width="100%" /></td></tr>
        {% for neighbor in neighbors.enemies %}
          <tr>
            <td style="color: white;">{{ neighbor.username }}</td>
            <td style="color: red; font-size: 20px;">At War</td>
            <td>
              <input
                type="button"
                onclick="$('#tauntmsg{{neighbor.id}}').show('fast');stopprop(event);"
                value="--Taunt--"/>
            </td>
            <td>
              <input 
                type="button" 
                onclick="$('#peacemsg').show('fast');
                         $('#begforpeace').attr('name','begforpeace-{{neighbor.id}}');
                         stopprop(event);"
                value="--Beg for Peace--" />
            </td>
            <td><img src="/site_media/center.png" 
                     class="noborder"
                     onclick="centermap({{neighbor.get_profile.capital.x}},{{neighbor.get_profile.capital.y}});"
                     title="center on capital"/></td>
          </tr>
        {% endfor %}
        {% endif %}
        </table>
        <div id="peacemsg" style="display:none;">
          <textarea name="begforpeace"
                    id="begforpeace"
                    onclick="stopprop(event);"
                    onkeydown="$('#neighborsubmit').show();stopprop(event);"
                    rows="5" 
                    cols="40"/>
        </div>
        <div style="padding-top:20px;">
          <button style="display:none;" 
                  id="neighborsubmit"
                  width="100%" 
                  value="Submit" 
                  type="submit">--Submit--</button>
            <button width="100%" 
                    id="neighborcancel"
                    align="right" 
                    value="Done"
                    type="button"
                    onclick="$('#neighbors').hide('fast');">--Cancel--</button>
        </div>
      </form>
      {% endif %}

{% endblock %}
